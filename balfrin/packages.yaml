packages:
  # patchelf v0.18 leads to errors when it was used to set RPATHS
  #   ELF load command address/offset not properly aligned
  # c.f.  https://github.com/NixOS/patchelf/issues/492
  cray-gtl:
    buildable: true
  cray-mpich:
    buildable: true
  cray-pals:
    buildable: true
  cray-pmi:
    buildable: true
  patchelf:
    require: "@:0.17"
  slurm:
    buildable: false
    externals:
    - spec: slurm@23-02-7
      prefix: /usr
  xpmem:
    buildable: false
    externals:
    - spec: xpmem@2.6.2
      prefix: /opt/cray/xpmem/default
  gcc:
    externals:
      - spec: gcc@12.3.0 languages='c,c++,fortran'
        prefix: /usr
        extra_attributes:
          compilers:
            c: /usr/bin/gcc-12
            cxx: /usr/bin/g++-12
            fortran: /usr/bin/gfortran-12

  openmpi:
    buildable: true
    variants: +internal-pmix fabrics=cma,ofi,xpmem schedulers=slurm +cray-xpmem

  libfabric:
    buildable: true
    externals:
    - spec: libfabric@1.15.2.0 fabrics=cxi,tcp,udp,rxm,rxd
      prefix: /opt/cray/libfabric/1.15.2.0/
    version: ["git.e08d3161b8038ebfa50a4eb5bf76132e4eaeb137=main"]
    require: fabrics=cxi,rxm,tcp

  libcxi:
    version: ["git.0f3609b5e224636abffc7ceffe6f4e9c83244c08=main"]

  cxi-driver:
    version: ["git.c284516fa8d0027b8f84e8ca818e8c6bbe320bd8=main"]

  cassini-headers:
    version: ["git.9a8a738a879f007849fbc69be8e3487a4abf0952=main"]
